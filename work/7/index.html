<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>PWA实践7---保持后台同步</title>
</head>
<body>
  <h1>后台同步</h1>
  <button id="click" >你好世界</button>
</body>
<script>
  if(navigator.serviceWorker){
    navigator.serviceWorker.register("sw.js").then(res=>{
      console.log(res);
    })
  }

  var triggerMessageQueueUpdate = function(){
    navigator.serviceWorker.ready.then(reg=>{
      reg.sync.register("message-queue-sync");
    })
  }

  var sendMessage = function(){
    triggerMessageQueueUpdate();
  }

  click.onclick = function(){
    sendMessage();
  }

</script>
</html>